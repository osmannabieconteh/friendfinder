var express = require("express");

var path = require("path");



var app = express();

var PORT = 3000

app.use(express.urlencoded({ extended: true }));
app.use(express.json());

var connection = mysql.createConnection({
  host: "localhost",
  port: 3000,
  user: "root",
  password: "Jjuniortoes.1",
  database: "friend_finders_db"
});

connection.connect(function (err) {
  if (err) {
    console.error("error connecting: " + err.stack);
    return;
  }
  console.log("connected as id " + connection.threadId);
});

// Routes
app.get("/api/friends", function (req, res) {

 connection.query("SELECT * FROM friends", function (err, result) {
    if (err) throw err;

    var html = "<h1> FRIEND FINDER </h1>";


    html += "<ul>";


    // for (var i = 0; i < result.length; i++) {
    //   html += "<li><p> ID: " + result[i].id + "</p>";
    //   html += "<p>Friends: " + result[i].name + " </p></li>";
    // }


    html += "</ul>";
    res.send(html);
  });
});


app.post("/api/friends", function (req, res) {
  console.log(req)

  var newCharacter = req.body;

  console.log(newCharacter);

  characters.push(newCharacter);

  res.json(newCharacter);
});


app.listen(PORT, function () {

  console.log("Server listening on: http://localhost:" + PORT);
});








// 3. Your `htmlRoutes.js` file should include two routes:

//    * A GET Route to `/survey` which should display the survey page.
//    * 
// 4. Your `apiRoutes.js` file should contain two routes: